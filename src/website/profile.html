<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - PoliticNZ</title>
    <link rel="stylesheet" href="styles.css?v=1.0.0">
</head>
<body>
    <div id="navbar-container"></div>
    <h1>My Profile</h1>
    
    <div id="loading">Loading profile...</div>
    
    <div id="profile-content" style="display: none;">
        <form id="profileForm">
            <div>
                <label for="display_name">Display Name*</label>
                <input 
                    type="text" 
                    id="display_name" 
                    name="display_name" 
                    required 
                    minlength="2" 
                    maxlength="20"
                >
                <small>2-20 characters</small>
            </div>

            <div id="bio-field">
                <label for="bio">Bio</label>
                <textarea 
                    id="bio" 
                    name="bio" 
                    maxlength="500"
                    rows="4"
                    placeholder="Tell us about yourself"
                ></textarea>
                <small id="bio-counter">0/500 characters</small>
            </div>

            <div id="political-alignment-field">
                <label for="political_alignment">Political Alignment</label>
                <select id="political_alignment" name="political_alignment">
                    <option value="">Prefer not to say</option>
                    <option value="National">National</option>
                    <option value="Labour">Labour</option>
                    <option value="Independent">Independent</option>
                </select>
            </div>

            <div id="privacy-field">
                <label>
                    <input type="checkbox" id="profile_private" name="profile_private">
                    Make my profile private (others will only see my name)
                </label>
            </div>

            <div id="privacy-notice" style="display: none;">
                <p><strong>ðŸ”’ This profile is private</strong></p>
                <p>This user has chosen to keep their profile information private.</p>
            </div>

            <div>
                <p><strong>User ID:</strong> <span id="user_id"></span></p>
                <p><strong>Joined:</strong> <span id="created_at"></span></p>
                <p><strong>Last updated:</strong> <span id="updated_at"></span></p>
            </div>

            <div id="success-message" style="color: green; display: none;"></div>
            <div id="error-message" style="color: red; display: none;"></div>

            <div id="view-mode-buttons">
                <button type="button" id="editButton">Edit Profile</button>
            </div>
            
            <div id="edit-mode-buttons" style="display: none;">
                <button type="submit" id="submitButton">Save Changes</button>
                <button type="button" id="cancelButton">Cancel</button>
            </div>
        </form>
    </div>

    <div id="error-content" style="display: none;">
        <p>Failed to load profile. Please try again.</p>
        <button onclick="window.location.reload()">Retry</button>
        <button onclick="window.location.href='home.html'">Go Home</button>
    </div>

    <div class="user-posts-section" id="user-posts-section" style="display: none;">
        <h2>My Posts</h2>
        <div id="posts-loading" class="posts-loading">Loading posts...</div>
        <div id="posts-error" class="posts-error" style="display: none;"></div>
        <div id="user-posts" class="user-posts"></div>
    </div>

    <script src="config.js?v=1.0.0"></script>
    <script src="utils.js?v=1.0.0"></script>
    <script src="auth.js?v=1.0.0"></script>
    <script src="validators.js?v=1.1.0"></script>
    <script src="date-utils.js?v=1.0.0"></script>
    <script src="api-client.js?v=1.0.0"></script>
    <script src="profile-api.js?v=1.1.0"></script>
    <script src="posts-api.js?v=1.0.0"></script>
    <script src="comments-api.js?v=1.0.0"></script>
    <script src="post-utils.js?v=1.1.0"></script>
    <script src="navbar.js?v=1.4.0"></script>
    <script src="profile-view.js?v=1.2.0"></script>
    <script src="profile-form.js?v=1.1.0"></script>
    <script src="profile.js?v=1.0.0"></script>
</body>
</html>

